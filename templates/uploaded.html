<!DOCTYPE html>
<html>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
<head>
    <title>Uploaded Image</title>
</head>
<body>
<div id="all">
<!--    <img src="static/lasso.png"/>-->
    <div class="up-menu">
        <button class="icon-btn" id="lasso"></button>
        <button class="icon-btn" id="pencil"></button>
        <button class="icon-btn" id="text-btn"></button>
    </div>
    <div id="menu-and-picture">
        <div class="translation-menu">
            <div>
                <select class="select1" name="models" id="model-select">
                    <option value="google_translate">Google переводчик</option>
                    <option value="test1">тест1</option>
                    <option value="test2">тест2</option>
                </select>
            </div>
            <div>
                <select class="select1" name="languages" id="start-language-select">
                    <option value="English">English</option>
                    <option value="Japanese">Japanese</option>
                    <option value="Russian">Russian</option>
                </select>
            </div>
            <div><textarea readonly="readonly"></textarea></div>
            <div>
                <select class="select1" name="languages2" id="end-language-select">
                    <option value="English">English</option>
                    <option value="Japanese">Japanese</option>
                    <option value="Russian">Russian</option>
                </select>
            </div>
            <div><textarea readonly="readonly"></textarea></div>
            <div>
                <button class="button">Перевести</button>
            </div>
        </div>
        <div id="picture-download">
            <img src="{{ url_for('send_uploaded_file', filename=filename) }}" alt="Uploaded Image" id="original-image">
            <button class="button"><a href="{{ url_for('send_uploaded_file', filename=filename) }}">Загрузить</a></button>
        </div>
        <div class="text-menu">
            <div>
                <select name="fonts" id="fonts-select" class="select2">
                    <option value="Times New Roman">English</option>
                    <option value="Arial">Japanese</option>
                    <option value="Comic Sans">Russian</option>
                </select>
            </div>
            <div>
                <select name="types" id="types-select" class="select2">
                    <option value="Regular">English</option>
                    <option value="Bold">Japanese</option>
                    <option value="Thick">Russian</option>
                </select>
            </div>
            <div>
                <select name="fontsize" id="fontsize-select" class="select2">
                    <option value="10">10</option>
                    <option value="12">12</option>
                    <option value="14">14</option>
                    <option value="16">16</option>
                    <option value="18">18</option>
                    <option value="20">20</option>
                    <option value="22">22</option>
                    <option value="24">24</option>
                </select>
            </div>
            <div>тут будет выбор выравнивания</div>
        </div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
            const overlays = {{ overlays | tojson }};
            const originalImage = document.getElementById('original-image');

            overlays.forEach((overlay) => {
                const img = new Image();
                img.src = "{{ url_for('send_temp_file', filename='') }}" + overlay.filename;
                img.classList.add('overlay');
                img.style.position = 'absolute';
                img.style.left = overlay.coords[0][0] + 'px';
                img.style.top = overlay.coords[0][1] + 'px';
                img.style.width = (overlay.coords[1][0] - overlay.coords[0][0]) + 'px';
                img.style.height = (overlay.coords[1][1] - overlay.coords[0][1]) + 'px';
                originalImage.appendChild(img);
            });
        });

</script>

<style>
    #all {
        position: relative;
    }

    .overlay {
        position: absolute;
        top: 0;
        left: 0;
        pointer-events: none;
    }
</style>
</body>
</html>
